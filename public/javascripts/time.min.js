if("undefined"==typeof Dell||null===Dell)var Dell={};!function(e,t){var n={inputTime:null,inputMinute:null,divErrors:null,divResult:null,btnCalculate:null},i={invalidEntry:"Please enter in hh:mm am/pm format",enterHour:"Please enter hour",enterNumericHour:"Please enter numeric hour",enterMinute:"Please enter minute",enterNumericMinute:"Please enter numeric minute",hourMax:"Hour may not exceed 12.",invalidSep:"Please separate hours and minutes with a :",minuteMax:"Minute may not exceed 59",enterAMPM:"Please enter AM or PM",enterMinutesToAdd:"Please enter number of minutes to add.",enterNumericMinutesToAdd:"Minutes to add must be a number"},u=[],l=null,r=null,a=null,s="",o=function(e){return""==e?!0:!isNaN(parseFloat(e))&&isFinite(e)},m=function(e){t(n.divResult).hide(),p(),t(n.divErrors).html(JSON.stringify(e))},c=function(){var e=t(n.inputTime).val();return e.substring(e.length-1,e.length)},h=function(){t(n.inputTime).val(s)},p=function(){u=[],t(n.divErrors).html("")},d=function(e){if(v(e),null==l||l.length<2)u.push(i.enterHour),m(u);else if(null==r||r.length<2)u.push(i.enterMinute),m(u);else if(null==a||2!=a.length)u.push(i.enterAMPM),m(u);else if(0==u.length)return!0;return!1},v=function(e){var m,p,d;u=[];var v=c();if(1==e.length&&" "==v)return u.push(i.enterNumericHour),void h();var f=e.split(":");return 0==f.length&&u.push(i.enterHour),f.length>=1&&f.length<3?(m=f[0],o(m)?("00"==m&&h(),m>=10&&m.length>2&&(m=1*m,t(n.inputTime).val(m)),m>12&&(u.push(i.hourMax),h())):(u.push(i.enterNumericHour),h())):u.push(i.invalidEntry),f.length<2&&" "==v&&(h(),t(n.inputTime).val(s+":")),2==f.length&&(1==m.length&&t(n.inputTime).val("0"+t(n.inputTime).val().toString()),mt=f[1].split(" "),p=mt[0],o(mt[0])&&""!=mt[0].trim()?mt[0]>59&&(u.push(i.minuteMax),h()):":"!=v&&(u.push(i.enterNumericMinute),h()),2==mt.length?(1==p.length&&(mt[0]=t(n.inputTime).val().toString().replace(":",":0"),t(n.inputTime).val(mt[0]),p=mt[0]),first=mt[1].toLowerCase().substring(0,1),second=mt[1].toLowerCase().substring(1,2),mt[1].length>=1&&"a"!=first&&"p"!=first?(u.push(i.enterAMPM),h()):2==mt[1].length&&"m"!=second?(u.push(i.enterAMPM),h()):mt[1].length>2?(u.push(i.enterAMPM),h()):d=first+second):(mt.length>2&&(u.push(i.enterAMPM),h()),p.length>=3&&("a"==v.toLowerCase()||"p"==v.toLowerCase()?(h(),t(n.inputTime).val(s+" "+v)):(u.push(i.enterAMPM),h())))),l=m,r=p,a=d,0==u.length};this.TimeCalculator={init:function(e){void 0!=e&&void 0!=e.selectors&&(n=e.selectors),t(n.inputTime).keydown(this.capturePriorVal),t(n.inputTime).keyup(this.preValidate),t(n.inputMinute).focus(function(){this.select()}),t(n.inputMinute).keypress(function(e){13==e.which&&t(n.btnCalculate).click()}),t(n.btnCalculate).click(this.calculate)},capturePriorVal:function(){s=t(n.inputTime).val()},preValidate:function(){var e=v(t(n.inputTime).val());e?p():m(u)},calculate:function(){var e=t(n.inputTime).val(),l=t(n.inputMinute).val();if(d(e)){if(0==l.length&&u.push(i.enterMinutesToAdd),o(l)||u.push(i.enterNumericMinutesToAdd),u.length>0)return void m(u);var r={time:e,minutes:l};p();var a=function(e){t(n.divResult).html(e.result),t(n.divResult).show(),t(n.btnCalculate).attr("disabled",!1)},s=function(e){t(n.divResult).hide(),m(e.errors),t(n.btnCalculate).attr("disabled",!1)};t(n.btnCalculate).attr("disabled",!0),t.ajax({type:"POST",url:"/api/time/",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(r),success:a,fail:s})}}},e.TimeCalculator=this.TimeCalculator}(Dell,jQuery),$(function(){TimeCalculator.init({selectors:{inputTime:"#time",inputMinute:"#minute",divErrors:"#error",divResult:"#result",btnCalculate:"#btnCalculate"}})});